<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Guider Profile - Pearl Guide</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <!-- Google Fonts (Poppins) -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      /* --- GLOBAL STYLES --- */
      :root {
        --primary-blue: #002855;
        --accent-blue: #086188;
        --text-light: #e2e8f0;
        --glass-bg: rgba(255, 255, 255, 0.1);
        --glass-border: rgba(255, 255, 255, 0.2);
        --card-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", Arial, sans-serif;
        min-height: 100vh;
        background: url("https://images.unsplash.com/photo-1506929562872-bb421503ef21?q=80&w=2668&auto=format&fit=crop")
          no-repeat center center/cover;
        background-attachment: fixed;
        color: #fff;
        position: relative;
        padding-bottom: 50px;
      }

      body::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(
          0,
          0,
          0,
          0.6
        ); /* Slightly darker overlay for profile readability */
        z-index: 0;
        pointer-events: none;
      }

      .container {
        position: relative;
        z-index: 2;
        padding-top: 40px;
      }

      /* --- GLASS COMPONENTS --- */
      .glass-card {
        background: rgba(
          20,
          30,
          50,
          0.6
        ); /* Darker glass for better contrast */
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border: 1px solid var(--glass-border);
        border-radius: 20px;
        box-shadow: var(--card-shadow);
        padding: 30px;
        margin-bottom: 25px;
        animation: fadeIn 0.6s ease;
      }

      /* --- PROFILE SIDEBAR --- */
      .profile-image-container {
        position: relative;
        width: 180px;
        height: 180px;
        margin: 0 auto 20px auto;
        border-radius: 50%;
        border: 4px solid var(--accent-blue);
        overflow: hidden;
        box-shadow: 0 0 20px rgba(8, 97, 136, 0.5);
      }

      .profile-image-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .sidebar-info {
        text-align: center;
      }

      .sidebar-info h2 {
        font-weight: 700;
        margin-bottom: 5px;
      }

      .sidebar-info .location {
        color: #bbb;
        font-size: 0.9rem;
        margin-bottom: 15px;
      }

      .rating-box {
        display: inline-flex;
        align-items: center;
        background: rgba(255, 215, 0, 0.2);
        color: #ffd700;
        padding: 5px 15px;
        border-radius: 20px;
        font-weight: 600;
        margin-bottom: 20px;
      }

      .contact-actions .btn {
        width: 100%;
        margin-bottom: 10px;
        border-radius: 12px;
        padding: 12px;
        font-weight: 500;
        border: none;
        transition: transform 0.2s;
      }

      .btn-book {
        background: var(--accent-blue);
        color: white;
      }

      .btn-book:hover {
        background: #064d6b;
        color: white;
        transform: translateY(-2px);
      }

      .btn-message {
        background: rgba(255, 255, 255, 0.1);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .btn-message:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      .info-list {
        list-style: none;
        text-align: left;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }

      .info-list li {
        display: flex;
        justify-content: space-between;
        margin-bottom: 12px;
        font-size: 0.95rem;
      }

      .info-list span.label {
        color: #aaa;
      }

      /* --- MAIN CONTENT AREA --- */
      .section-title {
        font-size: 1.4rem;
        font-weight: 600;
        margin-bottom: 20px;
        border-bottom: 2px solid var(--accent-blue);
        display: inline-block;
        padding-bottom: 5px;
      }

      .about-text {
        color: var(--text-light);
        line-height: 1.7;
        margin-bottom: 30px;
      }

      /* Specs Tags */
      .specs-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 30px;
      }

      .spec-tag {
        background: rgba(8, 97, 136, 0.3);
        border: 1px solid var(--accent-blue);
        color: #fff;
        padding: 6px 14px;
        border-radius: 8px;
        font-size: 0.9rem;
      }

      /* Reviews */
      .review-item {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 12px;
        padding: 15px;
        margin-bottom: 15px;
      }

      .review-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
      }

      .reviewer-name {
        font-weight: 600;
        color: var(--accent-blue);
      }

      .review-stars {
        color: #ffd700;
        font-size: 0.8rem;
      }

      .review-text {
        font-size: 0.9rem;
        font-style: italic;
        color: #ccc;
      }

      /* Gallery Grid */
      .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 10px;
      }

      .gallery-item {
        height: 100px;
        border-radius: 10px;
        overflow: hidden;
        cursor: pointer;
        position: relative;
      }

      .gallery-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s;
      }

      .gallery-item:hover img {
        transform: scale(1.1);
      }

      /* Back Button */
      .back-link {
        color: #fff;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        margin-bottom: 20px;
        font-weight: 500;
        transition: color 0.3s;
      }

      .back-link:hover {
        color: var(--accent-blue);
      }

      /* --- MODAL STYLES --- */
      .modal-content {
        background: #1a253a; /* Solid dark color for modal visibility */
        color: white;
        border: 1px solid var(--glass-border);
      }
      .modal-header,
      .modal-footer {
        border-color: rgba(255, 255, 255, 0.1);
      }
      .form-control,
      .form-select {
        background: #0f172a;
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: white;
      }
      .form-control:focus,
      .form-select:focus {
        background: #0f172a;
        color: white;
        border-color: var(--accent-blue);
        box-shadow: none;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <a href="guiders-page.html" class="back-link">
        <i class="fas fa-arrow-left me-2"></i> Back to Guiders
      </a>

      <div class="row" id="profileContainer">
        <!-- Content will be injected here by JS -->
        <!-- Loading Spinner Fallback -->
        <div class="text-center mt-5">
          <div class="spinner-border text-light" role="status"></div>
          <p class="mt-2">Loading Profile...</p>
        </div>
      </div>
    </div>

    <!-- Booking Modal -->
    <div class="modal fade" id="bookingModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              Book Tour with <span id="modalGuiderName"></span>
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="bookingForm">
              <div class="mb-3">
                <label class="form-label">Select Date</label>
                <input type="date" class="form-control" required />
              </div>
              <div class="mb-3">
                <label class="form-label">Number of Tourists</label>
                <input
                  type="number"
                  class="form-control"
                  min="1"
                  max="20"
                  value="2"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Tour Type</label>
                <select class="form-select">
                  <option>Day Tour</option>
                  <option>Multi-day Trip</option>
                  <option>Custom Package</option>
                </select>
              </div>
              <div class="mb-3">
                <label class="form-label">Message (Optional)</label>
                <textarea
                  class="form-control"
                  rows="3"
                  placeholder="Tell us about your interests..."
                ></textarea>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="confirmBooking()"
            >
              Confirm Booking
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // 1. Mock Database (Matches the IDs from the previous page)
      const guidersDB = {
        1: {
          name: "Saman Perera",
          img: "https://images.unsplash.com/photo-1540569014015-19a7be504e3a?q=80&w=2535&auto=format&fit=crop",
          rating: 4.8,
          reviewsCount: 42,
          location: "Kandy, Sri Lanka",
          role: "Senior Tour Guide",
          experience: "5 Years",
          languages: "English, Sinhala",
          age: 34,
          rate: "$40 / day",
          about:
            "Ayubowan! I am Saman, a certified national tourist guide based in the beautiful hill capital of Kandy. With over 5 years of experience, I specialize in historical temple tours and cultural immersion. I love sharing the hidden stories of the Kandyan Kingdom. I am also a licensed driver with a comfortable van for groups up to 6.",
          specializations: [
            "Historical Tours",
            "Buddhist Culture",
            "Photography",
            "Driver Guide",
          ],
          reviews: [
            {
              user: "Alice M.",
              text: "Saman was incredibly knowledgeable about the Temple of the Tooth. Highly recommended!",
              stars: 5,
            },
            {
              user: "David K.",
              text: "Great driver and very polite. Made our trip to Sigiriya smooth.",
              stars: 5,
            },
          ],
          gallery: [
            "https://images.unsplash.com/photo-1588259663784-0994f31c2c31?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1590053154884-282672322523?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1566296314736-6eaac1ca0cb9?q=80&w=600&auto=format&fit=crop",
          ],
        },
        2: {
          name: "Sarah Jenkins",
          img: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=2592&auto=format&fit=crop",
          rating: 5.0,
          reviewsCount: 28,
          location: "Yala, Sri Lanka",
          role: "Wildlife Specialist",
          experience: "3 Years",
          languages: "English, German, French",
          age: 29,
          rate: "$55 / day",
          about:
            "Hi there! I'm Sarah, your gateway to the wild side of Sri Lanka. My passion lies in wildlife conservation and safari adventures. Based near Yala National Park, I help travelers spot leopards, elephants, and rare birds while ensuring we respect nature. I speak fluent German and French to assist European travelers.",
          specializations: [
            "Wildlife Safari",
            "Bird Watching",
            "Eco Tourism",
            "Photography",
          ],
          reviews: [
            {
              user: "Hans G.",
              text: "Perfekt! Sarah speaks excellent German and found us a leopard!",
              stars: 5,
            },
            {
              user: "Chloe P.",
              text: "An amazing safari experience.",
              stars: 5,
            },
          ],
          gallery: [
            "https://images.unsplash.com/photo-1534177616072-ef7dc12044f9?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1563507850550-61f25b29b634?q=80&w=600&auto=format&fit=crop",
          ],
        },
        // Add more mock data as needed for IDs 3, 4, 5...
      };

      // 2. Logic to Get ID from URL and Render
      document.addEventListener("DOMContentLoaded", () => {
        // Get 'id' parameter from URL
        const urlParams = new URLSearchParams(window.location.search);
        let guiderId = urlParams.get("id");

        // Fallback to ID 1 if no ID or invalid ID provided (for demo purposes)
        if (!guiderId || !guidersDB[guiderId]) {
          console.log("No valid ID found, defaulting to 1 for demo.");
          guiderId = 1;
        }

        const data = guidersDB[guiderId];
        renderProfile(data);
      });

      function renderProfile(data) {
        const container = document.getElementById("profileContainer");

        // Generate Gallery HTML
        const galleryHTML = data.gallery
          ? data.gallery
              .map(
                (img) => `
            <div class="gallery-item">
                <img src="${img}" alt="Gallery Image">
            </div>
        `
              )
              .join("")
          : "<p>No images available.</p>";

        // Generate Reviews HTML
        const reviewsHTML = data.reviews
          ? data.reviews
              .map(
                (rev) => `
            <div class="review-item">
                <div class="review-header">
                    <span class="reviewer-name">${rev.user}</span>
                    <span class="review-stars">${"â˜…".repeat(rev.stars)}</span>
                </div>
                <p class="review-text">"${rev.text}"</p>
            </div>
        `
              )
              .join("")
          : "<p>No reviews yet.</p>";

        // Generate Specs HTML
        const specsHTML = data.specializations
          .map((spec) => `<span class="spec-tag">${spec}</span>`)
          .join("");

        const html = `
          <!-- Left Column: Sidebar -->
          <div class="col-lg-4">
            <div class="glass-card sidebar-info">
              <div class="profile-image-container">
                <img src="${data.img}" alt="${data.name}">
              </div>
              
              <h2>${data.name}</h2>
              <p class="location"><i class="fas fa-map-marker-alt me-1"></i> ${data.location}</p>
              
              <div class="rating-box">
                <i class="fas fa-star me-2"></i> ${data.rating} (${data.reviewsCount} Reviews)
              </div>

              <div class="contact-actions">
                <button class="btn btn-book" onclick="openBookingModal('${data.name}')">
                    Book Now
                </button>
                <button class="btn btn-message">
                    <i class="far fa-comment-alt me-2"></i> Message
                </button>
              </div>

              <ul class="info-list">
                <li><span class="label">Experience</span> <span>${data.experience}</span></li>
                <li><span class="label">Age</span> <span>${data.age} Years</span></li>
                <li><span class="label">Daily Rate</span> <span>${data.rate}</span></li>
                <li><span class="label">Languages</span> <span>${data.languages}</span></li>
              </ul>
            </div>
          </div>

          <!-- Right Column: Main Info -->
          <div class="col-lg-8">
            <div class="glass-card">
              <h3 class="section-title">About Me</h3>
              <p class="about-text">
                ${data.about}
              </p>

              <h3 class="section-title">Specializations</h3>
              <div class="specs-container">
                ${specsHTML}
              </div>

              <h3 class="section-title">Tour Gallery</h3>
              <div class="gallery-grid mb-4">
                ${galleryHTML}
              </div>

              <h3 class="section-title">Recent Reviews</h3>
              <div class="reviews-container">
                ${reviewsHTML}
              </div>
            </div>
          </div>
        `;

        container.innerHTML = html;
      }

      // 3. Modal Logic
      function openBookingModal(name) {
        document.getElementById("modalGuiderName").innerText = name;
        const myModal = new bootstrap.Modal(
          document.getElementById("bookingModal")
        );
        myModal.show();
      }

      function confirmBooking() {
        const btn = document.querySelector("#bookingModal .btn-primary");
        const originalText = btn.innerText;

        btn.innerText = "Processing...";
        btn.disabled = true;

        setTimeout(() => {
          // Close modal
          const modalEl = document.getElementById("bookingModal");
          const modalInstance = bootstrap.Modal.getInstance(modalEl);
          modalInstance.hide();

          // Reset button
          btn.innerText = originalText;
          btn.disabled = false;

          alert(
            "Booking request sent successfully! The guider will contact you shortly."
          );
        }, 1500);
      }
    </script>
  </body>
</html>
