<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Guider Profile - Pearl Guide</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <!-- Google Fonts (Poppins & Playfair Display) -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,600;0,700;1,600&family=Poppins:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />

    <style>
      /* --- GLOBAL STYLES (Matching Index) --- */
      :root {
        --ceylon-gold: #fbbf24;
        --tropical-teal: #22d3ee;
        --glass-bg: rgba(20, 30, 20, 0.75); /* Darker jungle tint */
        --glass-border: rgba(255, 255, 255, 0.15);
        --text-light: #e2e8f0;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", Arial, sans-serif;
        min-height: 100vh;
        color: #fff;
        position: relative;
        overflow-x: hidden;
      }

      /* --- SRI LANKAN SCENIC BACKGROUND --- */
      .bg-scenic {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        /* Iconic Nine Arch Bridge / Ella / Tea Plantation vibe */
        background: url("https://images.unsplash.com/photo-1584950064562-b9e3065b9347?q=80&w=2670&auto=format&fit=crop")
          no-repeat center center/cover;
      }

      /* Overlay */
      .bg-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        /* Gradient from dark jungle green to black */
        background: linear-gradient(
          to bottom,
          rgba(6, 78, 59, 0.5),
          rgba(15, 23, 42, 0.9)
        );
        backdrop-filter: brightness(0.9);
      }

      .container {
        position: relative;
        z-index: 2;
        padding-top: 40px;
        padding-bottom: 60px;
      }

      /* --- GLASS COMPONENTS --- */
      .glass-card {
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        border-radius: 24px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        padding: 30px;
        margin-bottom: 25px;
        animation: fadeIn 0.6s ease;
      }

      /* --- PROFILE SIDEBAR --- */
      .profile-image-container {
        position: relative;
        width: 180px;
        height: 180px;
        margin: 0 auto 20px auto;
        border-radius: 50%;
        border: 3px solid var(--ceylon-gold);
        padding: 5px; /* Spacing between border and image */
        box-shadow: 0 0 25px rgba(251, 191, 36, 0.3);
      }

      .profile-image-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 50%;
      }

      .sidebar-info {
        text-align: center;
      }

      .sidebar-info h2 {
        font-family: "Playfair Display", serif;
        font-weight: 700;
        font-size: 2rem;
        margin-bottom: 5px;
        color: #fff;
      }

      .sidebar-info .location {
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.9rem;
        margin-bottom: 15px;
        font-style: italic;
      }

      .rating-box {
        display: inline-flex;
        align-items: center;
        background: rgba(251, 191, 36, 0.15);
        color: var(--ceylon-gold);
        padding: 6px 16px;
        border-radius: 50px;
        font-weight: 600;
        margin-bottom: 25px;
        border: 1px solid rgba(251, 191, 36, 0.3);
      }

      .contact-actions .btn {
        width: 100%;
        margin-bottom: 12px;
        border-radius: 12px;
        padding: 14px;
        font-weight: 600;
        border: none;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.9rem;
      }

      .btn-book {
        background: linear-gradient(135deg, #fbbf24, #d97706);
        color: white;
        box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);
      }

      .btn-book:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(251, 191, 36, 0.5);
        color: white;
      }

      .btn-message {
        background: transparent;
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .btn-message:hover {
        background: rgba(255, 255, 255, 0.1);
        color: white;
        border-color: #fff;
      }

      .info-list {
        list-style: none;
        text-align: left;
        margin-top: 25px;
        padding-top: 25px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }

      .info-list li {
        display: flex;
        justify-content: space-between;
        margin-bottom: 15px;
        font-size: 0.95rem;
      }

      .info-list span.label {
        color: rgba(255, 255, 255, 0.6);
        font-weight: 300;
      }

      .info-list span.value {
        font-weight: 500;
        color: #fff;
      }

      /* --- MAIN CONTENT AREA --- */
      .section-title {
        font-family: "Playfair Display", serif;
        font-size: 1.6rem;
        font-weight: 700;
        margin-bottom: 25px;
        color: var(--ceylon-gold);
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .section-title::after {
        content: "";
        flex: 1;
        height: 1px;
        background: rgba(255, 255, 255, 0.1);
      }

      .about-text {
        color: rgba(255, 255, 255, 0.9);
        line-height: 1.8;
        margin-bottom: 35px;
        font-weight: 300;
        font-size: 1.05rem;
      }

      /* Specs Tags */
      .specs-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 35px;
      }

      .spec-tag {
        background: rgba(34, 211, 238, 0.1); /* Teal tint */
        border: 1px solid rgba(34, 211, 238, 0.3);
        color: var(--tropical-teal);
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 0.9rem;
        font-weight: 500;
      }

      /* Reviews */
      .review-item {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 16px;
        padding: 20px;
        margin-bottom: 15px;
        border: 1px solid rgba(255, 255, 255, 0.05);
      }

      .review-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .reviewer-name {
        font-weight: 600;
        color: #fff;
        font-family: "Playfair Display", serif;
      }

      .review-stars {
        color: var(--ceylon-gold);
        font-size: 0.85rem;
      }

      .review-text {
        font-size: 0.95rem;
        font-style: italic;
        color: rgba(255, 255, 255, 0.8);
        margin: 0;
      }

      /* Gallery Grid */
      .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 15px;
        margin-bottom: 35px;
      }

      .gallery-item {
        height: 120px;
        border-radius: 12px;
        overflow: hidden;
        cursor: pointer;
        position: relative;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .gallery-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
      }

      .gallery-item:hover img {
        transform: scale(1.15);
      }

      /* Back Button */
      .back-link {
        color: rgba(255, 255, 255, 0.8);
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        margin-bottom: 30px;
        font-weight: 500;
        transition: all 0.3s;
        padding: 8px 16px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50px;
      }

      .back-link:hover {
        color: var(--ceylon-gold);
        background: rgba(255, 255, 255, 0.2);
      }

      /* --- MODAL STYLES --- */
      .modal-content {
        background: #0f172a; /* Solid dark color */
        color: white;
        border: 1px solid var(--ceylon-gold);
        border-radius: 20px;
      }
      .modal-header {
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }
      .modal-footer {
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }
      .modal-title {
        font-family: "Playfair Display", serif;
        color: var(--ceylon-gold);
      }
      .form-control,
      .form-select {
        background: #1e293b;
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: white;
        padding: 12px;
      }
      .form-control:focus,
      .form-select:focus {
        background: #1e293b;
        color: white;
        border-color: var(--ceylon-gold);
        box-shadow: 0 0 0 0.25rem rgba(251, 191, 36, 0.25);
      }
      .form-label {
        color: rgba(255, 255, 255, 0.8);
        font-size: 0.9rem;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body>
    <!-- Scenic Background -->
    <div class="bg-scenic"></div>
    <div class="bg-overlay"></div>

    <div class="container">
      <a href="index.html" class="back-link">
        <i class="fas fa-arrow-left me-2"></i> Back to Adventures
      </a>

      <div class="row" id="profileContainer">
        <!-- Content will be injected here by JS -->
        <!-- Loading Spinner Fallback -->
        <div
          class="text-center mt-5"
          style="
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
          "
        >
          <div
            class="spinner-border text-warning"
            role="status"
            style="width: 3rem; height: 3rem"
          ></div>
          <p class="mt-3 text-white-50">Preparing your guide's profile...</p>
        </div>
      </div>
    </div>

    <!-- Booking Modal -->
    <div class="modal fade" id="bookingModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              Request Booking with <span id="modalGuiderName"></span>
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="bookingForm">
              <div class="mb-3">
                <label class="form-label">Select Date</label>
                <input type="date" class="form-control" required />
              </div>
              <div class="mb-3">
                <label class="form-label">Number of Tourists</label>
                <input
                  type="number"
                  class="form-control"
                  min="1"
                  max="20"
                  value="2"
                  required
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Tour Type</label>
                <select class="form-select">
                  <option>Day Tour</option>
                  <option>Multi-day Trip</option>
                  <option>Custom Package</option>
                </select>
              </div>
              <div class="mb-3">
                <label class="form-label">Message (Optional)</label>
                <textarea
                  class="form-control"
                  rows="3"
                  placeholder="Tell us about your interests..."
                ></textarea>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button
              type="button"
              class="btn btn-primary"
              style="
                background-color: var(--ceylon-gold);
                border: none;
                color: black;
                font-weight: 600;
              "
              onclick="confirmBooking()"
            >
              Confirm Request
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // 1. Mock Database (Matches the IDs from the previous page)
      const guidersDB = {
        1: {
          name: "Saman Perera",
          img: "https://images.unsplash.com/photo-1540569014015-19a7be504e3a?q=80&w=2535&auto=format&fit=crop",
          rating: 4.8,
          reviewsCount: 42,
          location: "Kandy, Sri Lanka",
          role: "Senior Tour Guide",
          experience: "5 Years",
          languages: "English, Sinhala",
          age: 34,
          rate: "$40 / day",
          about:
            "Ayubowan! I am Saman, a certified national tourist guide based in the beautiful hill capital of Kandy. With over 5 years of experience, I specialize in historical temple tours and cultural immersion. I love sharing the hidden stories of the Kandyan Kingdom. I am also a licensed driver with a comfortable van for groups up to 6.",
          specializations: [
            "Historical Tours",
            "Buddhist Culture",
            "Photography",
            "Driver Guide",
          ],
          reviews: [
            {
              user: "Alice M.",
              text: "Saman was incredibly knowledgeable about the Temple of the Tooth. Highly recommended!",
              stars: 5,
            },
            {
              user: "David K.",
              text: "Great driver and very polite. Made our trip to Sigiriya smooth.",
              stars: 5,
            },
          ],
          gallery: [
            "https://images.unsplash.com/photo-1588259663784-0994f31c2c31?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1590053154884-282672322523?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1566296314736-6eaac1ca0cb9?q=80&w=600&auto=format&fit=crop",
          ],
        },
        2: {
          name: "Sarah Jenkins",
          img: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=2592&auto=format&fit=crop",
          rating: 5.0,
          reviewsCount: 28,
          location: "Yala, Sri Lanka",
          role: "Wildlife Specialist",
          experience: "3 Years",
          languages: "English, German, French",
          age: 29,
          rate: "$55 / day",
          about:
            "Hi there! I'm Sarah, your gateway to the wild side of Sri Lanka. My passion lies in wildlife conservation and safari adventures. Based near Yala National Park, I help travelers spot leopards, elephants, and rare birds while ensuring we respect nature. I speak fluent German and French to assist European travelers.",
          specializations: [
            "Wildlife Safari",
            "Bird Watching",
            "Eco Tourism",
            "Photography",
          ],
          reviews: [
            {
              user: "Hans G.",
              text: "Perfekt! Sarah speaks excellent German and found us a leopard!",
              stars: 5,
            },
            {
              user: "Chloe P.",
              text: "An amazing safari experience.",
              stars: 5,
            },
          ],
          gallery: [
            "https://images.unsplash.com/photo-1534177616072-ef7dc12044f9?q=80&w=600&auto=format&fit=crop",
            "https://images.unsplash.com/photo-1563507850550-61f25b29b634?q=80&w=600&auto=format&fit=crop",
          ],
        },
        3: {
          name: "Kumara Dissanaike",
          img: "https://images.unsplash.com/photo-1552058544-f2b08422138a?q=80&w=2598&auto=format&fit=crop",
          rating: 4.5,
          reviewsCount: 15,
          location: "Ella, Sri Lanka",
          role: "Trekking Guide",
          experience: "8 Years",
          languages: "Sinhala, Tamil, English",
          age: 40,
          rate: "$35 / day",
          about:
            "I have hiked every trail in Ella and Haputale. If you want to see the sunrise from Little Adam's Peak or walk the rails of the Nine Arch Bridge safely, I am your guide.",
          specializations: ["Hiking", "Tea Plantations", "Nature Walks"],
          reviews: [],
          gallery: [
            "https://images.unsplash.com/photo-1588258524675-55d6563e41bc?q=80&w=600&auto=format&fit=crop",
          ],
        },
      };

      // 2. Logic to Get ID from URL and Render
      document.addEventListener("DOMContentLoaded", () => {
        // Get 'id' parameter from URL
        const urlParams = new URLSearchParams(window.location.search);
        let guiderId = urlParams.get("id");

        // Fallback to ID 1 if no ID or invalid ID provided (for demo purposes)
        if (!guiderId || !guidersDB[guiderId]) {
          console.log("No valid ID found, defaulting to 1 for demo.");
          guiderId = 1;
        }

        const data = guidersDB[guiderId];
        renderProfile(data);
      });

      function renderProfile(data) {
        const container = document.getElementById("profileContainer");

        // Generate Gallery HTML
        const galleryHTML =
          data.gallery && data.gallery.length > 0
            ? data.gallery
                .map(
                  (img) => `
            <div class="gallery-item">
                <img src="${img}" alt="Gallery Image">
            </div>
        `
                )
                .join("")
            : "<p class='text-white-50'>No gallery images available.</p>";

        // Generate Reviews HTML
        const reviewsHTML =
          data.reviews && data.reviews.length > 0
            ? data.reviews
                .map(
                  (rev) => `
            <div class="review-item">
                <div class="review-header">
                    <span class="reviewer-name">${rev.user}</span>
                    <span class="review-stars">${'<i class="fas fa-star"></i>'.repeat(
                      rev.stars
                    )}</span>
                </div>
                <p class="review-text">"${rev.text}"</p>
            </div>
        `
                )
                .join("")
            : "<p class='text-white-50'>No reviews yet.</p>";

        // Generate Specs HTML
        const specsHTML = data.specializations
          .map((spec) => `<span class="spec-tag">${spec}</span>`)
          .join("");

        const html = `
          <!-- Left Column: Sidebar -->
          <div class="col-lg-4">
            <div class="glass-card sidebar-info">
              <div class="profile-image-container">
                <img src="${data.img}" alt="${data.name}">
              </div>
              
              <h2>${data.name}</h2>
              <p class="location"><i class="fas fa-map-marker-alt me-1"></i> ${data.location}</p>
              
              <div class="rating-box">
                <i class="fas fa-star me-2"></i> ${data.rating} <span style="font-weight:400; margin-left:5px; color:rgba(255,255,255,0.7)">(${data.reviewsCount} Reviews)</span>
              </div>

              <div class="contact-actions">
                <button class="btn btn-book" onclick="openBookingModal('${data.name}')">
                    Book Adventure
                </button>
                <button class="btn btn-message">
                    <i class="far fa-comment-alt me-2"></i> Message Guide
                </button>
              </div>

              <ul class="info-list">
                <li><span class="label">Experience</span> <span class="value">${data.experience}</span></li>
                <li><span class="label">Age</span> <span class="value">${data.age} Years</span></li>
                <li><span class="label">Daily Rate</span> <span class="value">${data.rate}</span></li>
                <li><span class="label">Languages</span> <span class="value">${data.languages}</span></li>
              </ul>
            </div>
          </div>

          <!-- Right Column: Main Info -->
          <div class="col-lg-8">
            <div class="glass-card">
              <h3 class="section-title">About Me</h3>
              <p class="about-text">
                ${data.about}
              </p>

              <h3 class="section-title">Expertise</h3>
              <div class="specs-container">
                ${specsHTML}
              </div>

              <h3 class="section-title">Gallery</h3>
              <div class="gallery-grid">
                ${galleryHTML}
              </div>

              <h3 class="section-title">What Travelers Say</h3>
              <div class="reviews-container">
                ${reviewsHTML}
              </div>
            </div>
          </div>
        `;

        container.innerHTML = html;
      }

      // 3. Modal Logic
      function openBookingModal(name) {
        document.getElementById("modalGuiderName").innerText = name;
        const myModal = new bootstrap.Modal(
          document.getElementById("bookingModal")
        );
        myModal.show();
      }

      function confirmBooking() {
        const btn = document.querySelector("#bookingModal .btn-primary");
        const originalText = btn.innerText;

        btn.innerText = "Processing...";
        btn.disabled = true;

        setTimeout(() => {
          // Close modal
          const modalEl = document.getElementById("bookingModal");
          const modalInstance = bootstrap.Modal.getInstance(modalEl);
          modalInstance.hide();

          // Reset button
          btn.innerText = originalText;
          btn.disabled = false;

          alert(
            "Booking request sent successfully! The guider will contact you shortly."
          );
        }, 1500);
      }
    </script>
  </body>
</html>
